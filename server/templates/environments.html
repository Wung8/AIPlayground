<!-- backend/templates/environments.html -->
{% extends "base.html" %}
{% set active = "environments" %}
{% set title = "Environments" %}

{% macro stars(n) -%}
  {%- set n = 0 if n < 0 else (5 if n > 5 else n) -%}
  {{ "★" * n }}{{ "☆" * (5 - n) }}
{%- endmacro %}

{% block content %}
  <div class="content">
    <aside class="sidebar wide">
      <div class="side-section">
        <div class="side-title">User Documentation</div>
        <div class="side-item small">Installation</div>
        <div class="side-item small">Creating Agents</div>
        <div class="side-item small">Uploading Agents</div>
      </div>

      <div class="side-section">
        <div class="side-title">Environments</div>
        <div class="side-box">
          {% for e in environments %}
            <a class="side-item {{ 'is-active' if e.slug == selected_slug else '' }}"
               href="{{ url_for('env_doc', slug=e.slug) }}">{{ e.title }}</a>
          {% endfor %}
        </div>
      </div>
    </aside>

    <main class="main panel">
      <div class="panel-pad">
        <div class="panel-title">Environments</div>
        <div class="env-list">
          {% for e in environments %}
            <div class="env-card">
              <div class="env-card-left">
                <a class="env-h2" href="{{ url_for('play', slug=e.slug) }}">{{ e.title }}</a>
                <div class="env-diff">
                  <span class="env-diff-label">Difficulty:</span>
                  <span class="env-stars">{{ stars(e.difficulty) }}</span>
                </div>
                <div class="env-desc">{{ e.description }}</div>
                <a class="env-doc-link" href="{{ url_for('env_doc', slug=e.slug) }}">documentation</a>
              </div>
              <div class="env-card-right">
                <a href="{{ url_for('play', slug=e.slug) }}" class="env-img"></a>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </main>
  </div>
{% endblock %}
